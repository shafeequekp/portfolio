{%load static%}
<!DOCTYPE html>
<html lang="en">

<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>{%if profile%}{{profile.name}} - {{profile.title}}{%else%}Portfolio{%endif%}</title>

 <!-- Bootstrap 5 CDN -->
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
 integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

 <!-- Font Awesome -->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

 <!-- Custom CSS -->
 <link rel="stylesheet" href="{%static 'core/style.css'%}">
</head>

<body data-bs-spy="scroll" data-bs-target="#navbar-example" data-bs-smooth-scroll="true" tabindex="0">

 <!-- Navbar -->
 <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="navbar-example">
 <div class="container">
 <a class="navbar-brand" href="#">{%if profile%}{{profile.name}}{%else%}Portfolio{%endif%}</a>
 <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
 <span class="navbar-toggler-icon"></span>
 </button>
 <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
 <ul class="navbar-nav">
 <li class="nav-item"><a class="nav-link active" href="#home">Home</a></li>
 <li class="nav-item"><a class="nav-link" href="#skills">Skills</a></li>
 <li class="nav-item"><a class="nav-link" href="#experience">Experience</a></li>
 <li class="nav-item"><a class="nav-link" href="#projects">Projects</a></li>
 <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
 <li class="nav-item">
 <div id="theme-toggle" title="Toggle Theme">
 <i class="fas fa-moon"></i>
 </div>
 </li>
 </ul>
 </div>
 </div>
 </nav>

 <!-- Hero Section -->
 <section id="home" class="hero-section container">
 <div class="row align-items-center">
 <div class="col-md-6 order-md-2 text-center">
 {%if profile.profile_image%}
 <img src="{{profile.profile_image.url}}" alt="Profile" class="hero-img mb-4">
 {%else%}
 <div class="hero-img d-inline-flex align-items-center justify-content-center bg-light text-muted">
 No Image
 </div>
 {%endif%}
 </div>
 <div class="col-md-6 order-md-1">
 <h1 class="display-4 fw-bold">Hi, I'm <span style="color: var(--primary-color);">{% if profile %}{{profile.name}}{%else%}Developer{%endif%}</span></h1>

 <h3 class="text-muted mb-4 opacity-75">{%if profile%}{{profile.title}}{%endif%}</h3>
 <p class="lead mb-4">{%if profile%}{{profile.bio}}{%else%}Welcome to my portfolio.{%endif%}</p>
 <div class="d-flex gap-3">
 <a href="#contact" class="btn btn-primary d-flex align-items-center gap-2 shadow">
 Contact Me <i class="fas fa-paper-plane"></i>
 </a>
 {%if profile.resume%}
 <a href="{{profile.resume.url}}" target="_blank"
 class="btn btn-outline-primary d-flex align-items-center gap-2">
 Download CV <i class="fas fa-download"></i>
 </a>
 {%endif%}
 </div>
 </div>
 </div>
 </section>

 <!-- Skills Section -->
 <section id="skills" class="py-5">
 <div class="container">
 <h2 class="section-title">Skills</h2>
 <div class="row">
 {%regroup skills by category as skill_list%}
 {%for category in skill_list%}
 <div class="col-md-6 mb-5">
 <div class="card h-100 p-4">
 <h4 class="mb-4 text-center">{{category.grouper}}</h4>
 {%for skill in category.list%}
 <div class="mb-3">
 <div class="d-flex justify-content-between mb-1">
 <span class="skill-info fw-bold"><i
 class="{{skill.icon_class}} me-2 text-primary"></i>{{skill.name}}</span>
 <span class="proficiency-text">{{skill.proficiency}}%</span>
 </div>
 <div class="progress">
 <div class="progress-bar" role="progressbar" style="width: {{skill.proficiency}}%">
 </div>
 </div>
 </div>
 {%endfor%}
 </div>
 </div>
 {%endfor%}
 </div>
 </div>
 </section>

 <!-- Experience Section -->
 <section id="experience" class="py-5">
 <div class="container">
 <h2 class="section-title">Experience</h2>
 <div class="row justify-content-center">
 <div class="col-lg-8">
 {%for exp in experiences%}
 <div class="card mb-4 shadow-sm">
 <div class="card-body p-4">
 <div class="d-flex justify-content-between align-items-center mb-2">
 <h5 class="card-title fw-bold m-0">{{exp.role}}</h5>
 <small class="text-muted">{{exp.start_date|date:"Y"}} - {% if exp.is_current %}Present{%else%}{{exp.end_date|date:"Y"}}{%endif%}</small>
 </div>
 <h6 class="text-primary mb-3">{{exp.company}}</h6>
 <p class="card-text opacity-75">{{exp.description}}</p>
 </div>
 </div>
 {%endfor%}
 </div>
 </div>
 </div>
 </section>

 <!-- Projects Section -->
 <section id="projects" class="py-5">
 <div class="container">
 <h2 class="section-title">Projects</h2>
 <div class="row g-4">
 {%for project in projects%}
 <div class="col-md-6 col-lg-4">
 <div class="card h-100 p-0 overflow-hidden">
 {%if project.image%}
 <img src="{{project.image.url}}" class="card-img-top" alt="{{project.title}}"
 style="height: 200px; object-fit: cover;">
 {%else%}
 <div class="bg-light d-flex align-items-center justify-content-center" style="height: 200px;">
 <span class="text-muted">No Image</span>
 </div>
 {%endif%}
 <div class="card-body p-4">
 <h5 class="card-title fw-bold">{{project.title}}</h5>
 <p class="card-text mb-3">{{project.description|truncatechars:100}}</p>
 <div class="mb-3">
 <small class="tech-badge">{{project.technologies}}</small>
 </div>
 <div class="d-flex gap-2">
 {%if project.demo_link%}
 <a href="{{project.demo_link}}" target="_blank" class="btn btn-sm btn-primary">Demo</a>
 {%endif%}
 {%if project.github_link%}
 <a href="{{project.github_link}}" target="_blank"
 class="btn btn-sm btn-outline-primary">GitHub</a>
 {%endif%}
 </div>
 </div>
 </div>
 </div>
 {%endfor%}
 </div>
 </div>
 </section>

 <!-- Contact Section -->
 <section id="contact" class="py-5">
 <div class="container">
 <h2 class="section-title">Contact Me</h2>
 <div class="row justify-content-center">
 <div class="col-md-8 col-lg-6">
 <form action="{%url 'contact'%}" method="POST" class="card p-4">
 {%csrf_token%}
 <div class="mb-3">
 <label class="form-label">Name</label>
 <input type="text" name="name" class="form-control" required>
 </div>
 <div class="mb-3">
 <label class="form-label">Email</label>
 <input type="email" name="email" class="form-control" required>
 </div>
 <div class="mb-3">
 <label class="form-label">Subject</label>
 <input type="text" name="subject" class="form-control" required>
 </div>
 <div class="mb-3">
 <label class="form-label">Message</label>
 <textarea name="message" class="form-control" rows="5" required></textarea>
 </div>
 <button type="submit" class="btn btn-primary w-100 shadow">Send Message <i
 class="fas fa-paper-plane ms-2"></i></button>
 </form>
 </div>
 </div>
 </div>
 </section>

 <!-- Footer -->
 <footer>
 <div class="container text-center">
 <h3 class="mb-4">{%if profile%}{{profile.name}}{%endif%}</h3>
 <div class="footer-social mb-4">
 {%if profile.linkedin_link%}
 <a href="{{profile.linkedin_link}}" target="_blank"><i class="fab fa-linkedin"></i></a>
 {%endif%}
 {%if profile.github_link%}
 <a href="{{profile.github_link}}" target="_blank"><i class="fab fa-github"></i></a>
 {%endif%}
 </div>
 <p class="text-muted small mb-0">&copy; {%now "Y"%} All rights reserved.</p>
 </div>
 </footer>

 <!-- Bootstrap JS -->
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
 integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
 crossorigin="anonymous"></script>

 <!-- Theme Switcher JS -->
 <script>
 const themeToggle = document.getElementById('theme-toggle');
 const themeIcon = themeToggle.querySelector('i');
 const body = document.body;

 function updateIcon(isLight) {
 if (isLight) {
 themeIcon.classList.replace('fa-moon', 'fa-sun');
 } else {
 themeIcon.classList.replace('fa-sun', 'fa-moon');
 }
 }

 themeToggle.addEventListener('click', () => {
 const isLight = body.classList.toggle('light-mode');
 localStorage.setItem('theme', isLight ? 'light' : 'dark');
 updateIcon(isLight);
 });

 // Load saved theme
 if (localStorage.getItem('theme') === 'light') {
 body.classList.add('light-mode');
 updateIcon(true);
 }
 </script>
</body>

</html>